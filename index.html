<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>הצעת מחיר – סדנת AI ואוטומציה לצוות Balena</title>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #fafafa;
      --fg: #193752;
      --muted: #5a6a7b;
      --line: rgba(25, 55, 82, 0.12);
      --accent: #F5A219;
      --accent-2: #00b8a9;
      --danger: #B5291D;
      --white: #ffffff;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Heebo', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--fg);
      line-height: 1.7;
      direction: rtl;
    }

    .container { max-width: 880px; margin: 0 auto; padding: 0 24px; }

    .header {
      text-align: center;
      padding: 96px 0 64px 0;
      border-bottom: 1px solid rgba(245, 162, 25, 0.2);
      position: relative;
      overflow: hidden;
    }
    .header::before, .header::after {
      content: '';
      position: absolute;
      width: 480px; height: 480px;
      border-radius: 50%;
      filter: blur(60px);
      z-index: -1;
      opacity: 0.25;
      animation: float 12s ease-in-out infinite;
    }
    .header::before { right: -120px; top: -160px; background: radial-gradient(closest-side, rgba(245,162,25,0.45), transparent 70%); }
    .header::after { left: -140px; bottom: -200px; background: radial-gradient(closest-side, rgba(0,184,169,0.35), transparent 70%); animation-delay: -3s; }

    @keyframes float {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-12px) scale(1.02); }
    }

    .brand-logo { width: 92px; height: auto; border-radius: 12px; box-shadow: 0 6px 28px rgba(25,55,82,0.1); margin-bottom: 18px; }

    .eyebrow {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(0, 184, 169, 0.08);
      border: 1px solid rgba(0, 184, 169, 0.25);
      color: var(--fg);
      font-size: 0.95rem;
      margin-bottom: 16px;
    }

    .title { font-size: 2.2rem; font-weight: 800; margin-bottom: 20px; }

    .meta { color: var(--muted); font-size: 1rem; }
    .meta + .meta { margin-top: 6px; }
    .meta .date { color: var(--fg); font-weight: 500; }

    section { margin: 64px 0; }

    h2 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--fg);
      position: relative;
      margin-bottom: 18px;
    }
    h2::after {
      content: '';
      position: absolute;
      right: 0; bottom: -8px;
      width: 44px; height: 3px;
      background: var(--accent);
      border-radius: 2px;
    }

    .subtle-card {
      background: var(--white);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 24px;
    }

    .kvs { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 14px; margin-top: 12px; }
    .kv {
      background: rgba(25, 55, 82, 0.03);
      border: 1px solid var(--line);
      border-right: 4px solid rgba(245, 162, 25, 0.55);
      border-radius: 12px;
      padding: 16px 14px;
    }
    .kv strong { display: block; font-weight: 700; margin-bottom: 6px; }
    .kv span { color: var(--muted); }

    ul.clean { list-style: none; }
    ul.clean li { padding: 14px 0; border-bottom: 1px solid #eee; }
    ul.clean li:last-child { border-bottom: none; }

    .pill-list { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 8px; }
    .pill {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 8px 12px; border-radius: 999px;
      background: rgba(0, 184, 169, 0.06);
      border: 1px solid rgba(0, 184, 169, 0.25);
      color: var(--fg);
      font-size: 0.95rem;
    }
    .pill b { color: var(--fg); font-weight: 700; }

    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; margin-top: 16px; }
    .card {
      background: var(--white);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 18px;
    }
    .card h3 { font-size: 1.06rem; font-weight: 700; margin-bottom: 8px; color: var(--fg); }
    .card p { color: var(--muted); }

    .pricing { background: rgba(181, 41, 29, 0.03); border: 1px solid rgba(181, 41, 29, 0.15); border-radius: 14px; padding: 22px; }
    .price { font-size: 2rem; font-weight: 800; color: var(--danger); margin: 8px 0 4px 0; }
    .muted { color: var(--muted); }

    .cta {
      background: rgba(245, 162, 25, 0.05);
      border: 1px solid rgba(245, 162, 25, 0.25);
      border-radius: 16px;
      padding: 32px;
      text-align: center;
    }
    .cta p { margin-top: 8px; color: var(--muted); }
    .cta .cta-btn {
      margin-top: 16px;
      background: var(--fg);
      color: #fff;
      border: 2px solid var(--fg);
      border-radius: 12px;
      padding: 14px 24px;
      font-size: 1.05rem;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: 'Heebo', sans-serif;
    }
    .cta .cta-btn:hover { background: #fff; color: var(--fg); border-color: var(--accent); }

    .contact {
      background: var(--fg);
      color: #fff;
      border-radius: 16px;
      padding: 28px;
      text-align: center;
    }
    .contact .links { display: flex; justify-content: center; gap: 14px; flex-wrap: wrap; margin-top: 10px; }
    .contact .links a {
      color: #fff; text-decoration: none;
      border: 1px solid rgba(245, 162, 25, 0.4);
      border-radius: 10px; padding: 10px 14px;
      transition: all 0.2s ease;
    }
    .contact .links a:hover { background: var(--accent); color: var(--fg); }

    .success { display: none; margin-top: 16px; padding: 16px; border-radius: 10px; background: var(--fg); color: #fff; }

    /* Visual boost */
    .title {
      font-size: clamp(1.9rem, 3.5vw, 2.8rem);
      font-weight: 900;
      letter-spacing: 0.2px;
      background: linear-gradient(135deg, #12324c 0%, #0f3c5e 48%, var(--accent) 92%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 10px 30px rgba(25,55,82,0.18);
    }

    .header-canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      pointer-events: none;
      opacity: 0.22;
    }

    .card, .kv {
      will-change: transform, box-shadow;
      transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
    }
    .card:hover, .kv:hover {
      box-shadow: 0 14px 40px rgba(25,55,82,0.12);
      border-color: rgba(0,0,0,0.06);
    }

    .cta .cta-btn {
      background: linear-gradient(135deg, var(--fg) 0%, #0f3c5e 100%);
      border-color: transparent;
      box-shadow: 0 10px 30px rgba(25,55,82,0.22), inset 0 0 0 0 rgba(245,162,25,0.0);
    }
    .cta .cta-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 38px rgba(25,55,82,0.28), inset 0 0 0 2px var(--accent);
    }

    /* Mobile sticky CTA */
    .mobile-sticky-cta {
      display: none;
      position: fixed;
      left: 0; right: 0; bottom: 0;
      z-index: 1002;
      padding: 10px 14px;
      background: linear-gradient(180deg, rgba(250,250,250,0.3) 0%, rgba(250,250,250,0.86) 60%, rgba(250,250,250,0.98) 100%);
      backdrop-filter: blur(8px);
      border-top: 1px solid rgba(25,55,82,0.08);
    }
    .mobile-sticky-cta .cta-btn {
      width: 100%;
      padding: 14px 18px;
      border-radius: 12px;
      font-size: 1.05rem;
      font-weight: 800;
    }

    /* Reveal on scroll - progressive enhancement
       ברירת מחדל: נראה. אם JS פעיל נוסיף body.anim כדי לקבל אפקטי כניסה */
    .reveal { opacity: 1; transform: none; transition: opacity .5s ease, transform .6s ease; }
    body.anim .reveal { opacity: 0; transform: translateY(16px); }
    .reveal-visible { opacity: 1; transform: translateY(0); }

    /* Modal */
    .modal-overlay {
      display: none; position: fixed; inset: 0; z-index: 1000;
      background: rgba(0,0,0,0.45); backdrop-filter: blur(4px);
    }
    .modal {
      position: fixed; z-index: 1001; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: #fff; border-radius: 16px; padding: 24px; width: 92%; max-width: 680px;
      border: 1px solid var(--line);
      max-height: 92vh; overflow: hidden; display: flex; flex-direction: column;
    }
    .modal h3 { text-align: center; font-weight: 700; margin-bottom: 16px; }
    .steps-indicator { display: grid; grid-template-columns: repeat(3,1fr); gap: 8px; align-items: center; margin: 6px 0 14px 0; }
    .steps-indicator .dot { height: 6px; border-radius: 999px; background: rgba(25,55,82,0.15); }
    .steps-indicator .dot.active { background: var(--accent); }
    .step { display: none; }
    .step.active { display: block; }
    .step-title { font-weight: 700; margin-bottom: 8px; color: var(--fg); }
    .modal form { overflow: auto; padding-right: 2px; }
    .form-group { margin: 14px 0; }
    label { display: block; margin-bottom: 6px; font-weight: 500; color: var(--fg); }
    input, textarea, select {
      width: 100%; padding: 12px 14px; border: 1px solid rgba(25,55,82,0.2);
      border-radius: 10px; font-family: 'Heebo', sans-serif; font-size: 1rem; background: rgba(25,55,82,0.02);
    }
    input:focus, textarea:focus, select:focus { outline: none; border-color: var(--accent); }
    textarea { min-height: 90px; resize: vertical; }
    .modal-actions { display: flex; gap: 10px; margin-top: 16px; }
    .btn { padding: 12px 16px; border-radius: 10px; border: 2px solid; cursor: pointer; font-weight: 700; }
    .btn.primary { background: var(--fg); color: #fff; border-color: var(--fg); }
    .btn.primary:hover { background: #fff; color: var(--fg); }
    .btn.ghost { background: #fff; color: var(--muted); border-color: #ddd; }
    .btn.ghost:hover { background: #f5f5f5; }
    .close-x { position: absolute; top: 10px; left: 12px; border: none; background: transparent; font-size: 24px; color: #8a8a8a; cursor: pointer; }

    @media (max-width: 768px) {
      .title { font-size: 1.8rem; }
      section { margin: 48px 0; }
      .cta { padding: 24px; }
      .contact { padding: 22px; }
      .modal { padding: 20px; width: 94%; }
      .modal-actions { flex-direction: column; }
      .btn { width: 100%; }
      .mobile-sticky-cta { display: block; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <canvas id="sketchCanvas" class="header-canvas" aria-hidden="true"></canvas>
      <img id="brandLogo" class="brand-logo" alt="לוגו" src="https://res.cloudinary.com/dsoh3yteb/image/upload/v1723558434/NewLogo_BLANK-Recovered_x4kgew.png" />
      <span id="eyebrowText" class="eyebrow">הצעת מחיר</span>
      <h1 id="pageTitle" class="title">סדנת AI ואוטומציה לצוות Balena</h1>
      <div class="meta"><span id="fromLabel">מאת:</span> <span id="presenterName">עידו שגב</span></div>
      <div class="meta"><span id="toLabel">לכבוד:</span> <span id="orgName">Balena</span></div>
      <div class="meta"><span id="dateLabel">תאריך:</span> <span class="date" id="currentDate"></span></div>
    </header>

    <section class="reveal">
      <h2>פרטי הסדנה</h2>
      <div class="subtle-card">
        <div class="kvs">
          <div class="kv"><strong>פורמט</strong><span>פרונטלי (Hands-on) במשרדי <span id="orgInline">Balena</span></span></div>
          <div class="kv"><strong>משך כל מפגש</strong><span>4 שעות</span></div>
          <div class="kv"><strong>מספר מפגשים</strong><span id="sessionsText">2 או 3 (לבחירתכם)</span></div>
          <div class="kv"><strong>עלות למפגש</strong><span>6,000 ₪ + מע"מ</span></div>
          <div class="kv"><strong>שפת הסדנה</strong><span id="langText">עברית או אנגלית</span></div>
        </div>
      </div>
    </section>

    <section class="reveal">
      <h2>מטרת הסדנה</h2>
      <div class="subtle-card">
        להעניק לצוות <span id="orgInline2">Balena</span> כלים פרקטיים שישדרגו את תהליכי העבודה היומיומיים – משלב הפיתוח במעבדה,
        דרך שיתוף המידע בין צוותים ועד להצגת המוצר לשותפים ולקוחות – באמצעות שילוב חכם של AI, אוטומציות וכלים דיגיטליים מתקדמים.
      </div>
    </section>

    <section class="reveal">
      <h2>נקודות כאב שהסדנה תתמקד בפתרונן</h2>
      <div class="subtle-card">
        <ul class="clean">
          <li>ניהול ותיאום בין גורמים שונים – צוותי פיתוח, עיצוב, שיווק ושיתופי פעולה גלובליים.</li>
          <li>שיתוף חומרים בצורה מאובטחת ומהירה – קבצים גדולים, נתוני ניסויים ותיעוד תהליכים.</li>
          <li>עומס ממשימות ידניות חוזרות – עדכון נתונים, שליחת דיווחים, ניהול משימות חוזרות.</li>
          <li>העברת ידע פנימי בין צוותים עם שפות מקצוע שונות – מניעת טעויות ותקלות בתקשורת.</li>
          <li>הפקת חומרים שיווקיים והצגות משכנעות במהירות – עבור לקוחות, משקיעים ושותפים.</li>
          <li>שמירה על חדשנות לא רק במוצר אלא גם בתהליכי העבודה – הצגת מקצועיות ברמה עולמית.</li>
        </ul>
      </div>
    </section>

    <section class="reveal">
      <h2>נושאי הסדנה (דוגמאות לתכנים)</h2>
      <div class="grid">
        <div class="card">
          <h3>עוזרי AI מתקדמים</h3>
          <p>ChatGPT, Claude, Perplexity – שימוש בשאלות מורכבות, כתיבה, סיכום וניתוח תוכן בהתאמה לתחום החומרים והקיימות.</p>
        </div>
        <div class="card">
          <h3>אוטומציות עם Make</h3>
          <p>בניית תהליכים אוטומטיים לניהול עדכונים, תזכורות, ושיתוף נתונים בין כלים ומערכות.</p>
        </div>
        <div class="card">
          <h3>Vibe-Coding</h3>
          <p>פיתוח מהיר של כלים פנימיים (דשבורדים, מערכות מעקב, טפסים) ללא צורך בידע קוד מתקדם.</p>
        </div>
        <div class="card">
          <h3>אפיון חכם של פרויקטים</h3>
          <p>מתודולוגיה לתכנון פרויקט/ניסוי כך שיחסוך זמן וימנע טעויות בשלב הביצוע.</p>
        </div>
        <div class="card">
          <h3>ניהול ידע ושיתוף בין צוותים</h3>
          <p>כלים לחיבור בין אנשי מדע, עיצוב ושיווק כך שכל גורם יקבל את המידע בצורה מותאמת.</p>
        </div>
        <div class="card">
          <h3>הפקת חומרים ויזואליים במהירות</h3>
          <p>מצגות עם Gamma, הדמיות מוצר עם Ideogram, תצוגות תלת ממדיות לפרזנטציות.</p>
        </div>
      </div>
      <div class="pill-list" style="margin-top: 14px;">
        <span class="pill"><b>Hands-on</b> תרגול מעשי</span>
        <span class="pill"><b>Real Data</b> חומרים אמיתיים מהחברה</span>
        <span class="pill"><b>Live Demos</b> הדגמות חיות</span>
      </div>
    </section>

    <section class="reveal">
      <h2>מבנה הסדנה</h2>
      <div class="subtle-card">
        <ul class="clean">
          <li>הצגת כלים רלוונטיים</li>
          <li>הדגמות חיות</li>
          <li>תרגול Hands-on עם חומרים אמיתיים מהחברה</li>
          <li>זמן לשאלות והתאמה לצרכים של המשתתפים</li>
          <li><strong>מספר משתתפים מומלץ:</strong> עד 15 בכל מפגש</li>
        </ul>
      </div>
    </section>

    <section class="reveal">
      <h2>עלות הסדנה</h2>
      <div class="pricing">
        <div class="muted" id="perSessionLabel">עלות למפגש</div>
        <div class="price" id="perSessionPrice">6,000 ₪ + מע"מ</div>
        <div class="muted" id="optionsLabel">אפשרויות:</div>
        <ul class="clean" style="margin-top:8px;">
          <li id="opt2">2 מפגשים: 12,000 ₪ + מע"מ</li>
          <li id="opt3">3 מפגשים: 18,000 ₪ + מע"מ</li>
        </ul>
        <div id="selectedTotal" class="muted" style="margin-top:8px;"></div>
      </div>
      <div class="subtle-card" style="margin-top:14px;">
        <h3 style="margin-bottom:8px; font-size:1.1rem;">המחיר כולל</h3>
        <ul class="clean">
          <li>אפיון צרכים לפני הסדנה (שאלון + שיחה עם נציגי הצוות)</li>
          <li>התאמת תכנים ודוגמאות לעולם העבודה של <span id="orgInline3">Balena</span></li>
          <li>חומרים דיגיטליים לכל המשתתפים</li>
          <li>ליווי מקצועי במהלך כל המפגשים</li>
          <li>הגעה ולוגיסטיקה</li>
        </ul>
      </div>
    </section>

    <section class="reveal cta">
      <h2 id="ctaTitle" style="margin-bottom: 8px;">אישור הצעת המחיר</h2>
      <p id="ctaSubtitle">נשמח להוביל יחד סדנה מעשית, מעודכנת ומותאמת לצוות <span id="orgInline4">Balena</span>.</p>
      <button id="ctaButton" class="cta-btn" onclick="openApprovalModal()">אישור ההצעה</button>
      <div id="successMessage" class="success">הצעת המחיר אושרה. ניצור קשר בהקדם.</div>
    </section>

    <section class="reveal contact">
      <h2 style="color:#fff; margin-bottom: 10px;">עידו שגב</h2>
      <div>מוביל תחום בינה מלאכותית בעסקים</div>
      <div class="links">
        <a href="tel:0547667775">טלפון: 054-766-7775</a>
        <a href="mailto:triroars@gmail.com">מייל: triroars@gmail.com</a>
        <a href="https://wa.me/972547667775" target="_blank" rel="noopener">WhatsApp</a>
      </div>
    </section>
  </div>

  <!-- Modal -->
  <div id="approvalModal" class="modal-overlay">
    <div class="modal">
      <button class="close-x" onclick="closeApprovalModal()" aria-label="סגירה">&times;</button>
      <h3 id="approverTitleText">פרטי המאשר</h3>
      <div class="steps-indicator" aria-hidden="true">
        <div class="dot" data-step-dot="1"></div>
        <div class="dot" data-step-dot="2"></div>
        <div class="dot" data-step-dot="3"></div>
      </div>
      <form id="approvalForm">
        <div class="step step-1 active">
          <div class="step-title">פרטים אישיים</div>
        <div class="form-group">
          <label id="labelName" for="approverName">שם מלא *</label>
          <input id="approverName" name="approverName" type="text" required />
        </div>
        <div class="form-group">
          <label id="labelRole" for="approverTitle">תפקיד *</label>
          <input id="approverTitle" name="approverTitle" type="text" required />
        </div>
        <div class="form-group">
          <label id="labelEmail" for="approverEmail">אימייל *</label>
          <input id="approverEmail" name="approverEmail" type="email" required />
        </div>
        <div class="form-group">
          <label id="labelPhone" for="approverPhone">טלפון</label>
          <input id="approverPhone" name="approverPhone" type="tel" />
        </div>
        </div>

        <div class="step step-2">
          <div class="step-title">בחירת מסלול</div>
          <div class="form-group">
            <label id="labelSessions">מספר מפגשים *</label>
            <div class="pill-list" style="gap:12px;">
              <label class="pill" style="cursor:pointer">
                <input type="radio" name="sessionsChoice" value="2" required style="margin-left:6px" /> 2 מפגשים
              </label>
              <label class="pill" style="cursor:pointer">
                <input type="radio" name="sessionsChoice" value="3" required style="margin-left:6px" /> 3 מפגשים
              </label>
            </div>
            <div id="modalPrice" class="muted" style="margin-top:8px;"></div>
          </div>
        </div>

        <div class="step step-3">
          <div class="step-title">פרטים ארגוניים</div>
        <div class="form-group">
          <label id="labelDept" for="organizationDepartment">מחלקה/אגף</label>
          <input id="organizationDepartment" name="organizationDepartment" type="text" />
        </div>
        <div class="form-group">
          <label id="labelNotes" for="notes">הערות נוספות</label>
          <textarea id="notes" name="notes" placeholder="הערות, שאלות או בקשות מיוחדות..."></textarea>
        </div>
        </div>

        <div class="modal-actions">
          <button type="button" id="btnBack" class="btn ghost" style="display:none">הקודם</button>
          <button type="button" id="btnNext" class="btn primary">הבא</button>
          <button type="button" id="btnCancel" class="btn ghost" onclick="closeApprovalModal()">ביטול</button>
          <button type="submit" id="btnSubmit" class="btn primary" style="display:none">אישור סופי</button>
        </div>
      </form>
    </div>
  </div>

  <!-- External libraries -->
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/roughjs/bundled/rough.js"></script>

  <script>
    // Date
    function setCurrentDate() {
      const now = new Date();
      const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
      document.getElementById('currentDate').textContent = now.toLocaleDateString('he-IL', options);
    }

    // Reveal on scroll
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('reveal-visible');
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.12 });
    window.addEventListener('load', () => {
      document.body.classList.add('anim');
      document.querySelectorAll('.reveal').forEach(el => io.observe(el));
    });

    // Modal logic
    function openApprovalModal() {
      document.getElementById('approvalModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }
    function closeApprovalModal() {
      document.getElementById('approvalModal').style.display = 'none';
      document.body.style.overflow = 'auto';
      document.getElementById('approvalForm').reset();
      // reset steps
      currentStep = 1; updateStepsUI();
    }
    document.getElementById('approvalModal').addEventListener('click', (e) => {
      if (e.target.id === 'approvalModal') closeApprovalModal();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && document.getElementById('approvalModal').style.display === 'block') closeApprovalModal();
    });

    // URL Params
    function applyParams() {
      const p = new URLSearchParams(location.search);
      const defaultLogo = 'https://res.cloudinary.com/dsoh3yteb/image/upload/v1723558434/NewLogo_BLANK-Recovered_x4kgew.png';

      const org = p.get('org') || 'Balena';
      const sessions = p.get('sessions'); // '2' | '3'
      const lang = p.get('lang'); // 'he' | 'en'
      const logo = p.get('logo') || defaultLogo;
      const name = p.get('name');
      const email = p.get('email');
      const phone = p.get('phone');
      const dept = p.get('dept');

      // Logo
      const logoEl = document.getElementById('brandLogo');
      logoEl.src = logo;

      // Organization placements
      const orgTargets = ['orgName','orgInline','orgInline2','orgInline3','orgInline4'];
      orgTargets.forEach(id => { const el = document.getElementById(id); if (el) el.textContent = org; });

      // Sessions
      if (sessions === '2' || sessions === '3') {
        const sText = sessions === '2' ? '2 מפגשים' : '3 מפגשים';
        document.getElementById('sessionsText').textContent = sText;
        const total = sessions === '2' ? '12,000 ₪ + מע"מ' : '18,000 ₪ + מע"מ';
        document.getElementById('selectedTotal').textContent = `נבחר: ${sText} — סך הכל: ${total}`;
        // Preselect radio in modal
        const radio = document.querySelector(`input[name="sessionsChoice"][value="${sessions}"]`);
        if (radio) { radio.checked = true; updateModalPrice(); }
      }

      // Prefill form
      if (name) document.getElementById('approverName').value = name;
      if (email) document.getElementById('approverEmail').value = email;
      if (phone) document.getElementById('approverPhone').value = phone;
      if (dept) document.getElementById('organizationDepartment').value = dept;

      // Language
      if (lang === 'en') {
        document.documentElement.lang = 'en';
        document.getElementById('eyebrowText').textContent = 'Quote';
        document.getElementById('pageTitle').textContent = 'AI & Automation Workshop for ' + org + ' Team';
        document.getElementById('fromLabel').textContent = 'From:';
        document.getElementById('toLabel').textContent = 'For:';
        document.getElementById('dateLabel').textContent = 'Date:';
        document.getElementById('langText').textContent = 'Hebrew or English';
        document.getElementById('ctaTitle').textContent = 'Approve Quote';
        document.getElementById('ctaSubtitle').textContent = 'We would love to run a hands-on, tailored workshop for ' + org + ' team.';
        document.getElementById('ctaButton').textContent = 'Approve the Quote';
        document.getElementById('perSessionLabel').textContent = 'Per session';
        document.getElementById('optionsLabel').textContent = 'Options:';
        document.getElementById('opt2').textContent = '2 sessions: 12,000 ₪ + VAT';
        document.getElementById('opt3').textContent = '3 sessions: 18,000 ₪ + VAT';
        const sLabel = document.getElementById('labelSessions');
        if (sLabel) sLabel.textContent = 'Number of sessions *';
        const modalPrice = document.getElementById('modalPrice');
        if (modalPrice) modalPrice.textContent = '';
        document.getElementById('approverTitleText').textContent = 'Approver Details';
        document.getElementById('labelName').textContent = 'Full name *';
        document.getElementById('labelRole').textContent = 'Role *';
        document.getElementById('labelEmail').textContent = 'Email *';
        document.getElementById('labelPhone').textContent = 'Phone';
        document.getElementById('labelDept').textContent = 'Department';
        document.getElementById('labelNotes').textContent = 'Additional notes';
        document.getElementById('btnCancel').textContent = 'Cancel';
        document.getElementById('btnSubmit').textContent = 'Confirm';
        document.getElementById('successMessage').textContent = 'Quote approved. We will contact you soon.';
      }
    }

    function updateModalPrice() {
      const choice = document.querySelector('input[name="sessionsChoice"]:checked');
      const modalPrice = document.getElementById('modalPrice');
      if (!choice || !modalPrice) return;
      const perSession = document.getElementById('perSessionPrice')?.textContent || '6,000 ₪ + מע"מ';
      const val = choice.value === '2' ? '12,000 ₪ + מע"מ' : '18,000 ₪ + מע"מ';
      modalPrice.textContent = `עלות כוללת: ${val} (עלות למפגש: ${perSession})`;
    }

    // Submit
    document.getElementById('approvalForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const submitBtn = e.target.querySelector('.btn.primary');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'שולח...';
      submitBtn.disabled = true;

      const formData = new FormData(e.target);
      const approver = {};
      for (const [k, v] of formData.entries()) approver[k] = v;

      const p = new URLSearchParams(location.search);
      const org = document.getElementById('orgName').textContent;
      // Prefer modal radio choice, fallback to URL param or default text
      const selectedRadio = document.querySelector('input[name="sessionsChoice"]:checked');
      const sessions = selectedRadio?.value || p.get('sessions') || '2 או 3';

      try {
        const hook = p.get('hook') || 'https://hook.eu2.make.com/6qwapfnavfh2464dbm545tbse7o52yct';
        const res = await fetch(hook, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            type: 'quote_approval',
            organization: org,
            presenter: document.getElementById('presenterName').textContent,
            workshop: document.getElementById('pageTitle').textContent,
            date: new Date().toISOString(),
            amountPerSession: document.getElementById('perSessionPrice').textContent,
            sessions,
            approver
          })
        });

        if (!res.ok) throw new Error('Network response was not ok');
        closeApprovalModal();
        const msg = document.getElementById('successMessage');
        msg.style.display = 'block';
        document.getElementById('ctaButton').style.display = 'none';
        const sticky = document.querySelector('.mobile-sticky-cta');
        if (sticky) sticky.style.display = 'none';
        msg.scrollIntoView({ behavior: 'smooth' });
      } catch (err) {
        submitBtn.textContent = 'שגיאה - נסה שוב';
        setTimeout(() => { submitBtn.textContent = originalText; submitBtn.disabled = false; }, 2500);
      }
    });

    // Modal interactive bindings
    window.addEventListener('change', (e) => {
      const t = e.target;
      if (t && t.name === 'sessionsChoice') {
        updateModalPrice();
      }
    });

    // Init
    function initGSAPAnimations() {
      if (!window.gsap) return;
      if (window.ScrollTrigger) gsap.registerPlugin(ScrollTrigger);

      const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });
      tl.from('.brand-logo', { opacity: 0, y: -20, duration: 0.6 })
        .from('.eyebrow', { opacity: 0, y: 10, duration: 0.5 }, '-=0.2')
        .from('.title', { opacity: 0, y: 12, duration: 0.7 }, '-=0.2')
        .from('.header .meta', { opacity: 0, y: 8, duration: 0.4, stagger: 0.12 }, '-=0.3');

      gsap.utils.toArray('section').forEach((section) => {
        gsap.from(section, {
          opacity: 0,
          y: 28,
          duration: 0.8,
          ease: 'power2.out',
          scrollTrigger: {
            trigger: section,
            start: 'top 80%',
            once: true,
          }
        });
      });
    }

    function initRoughSketch() {
      if (!window.rough) return;
      const header = document.querySelector('.header');
      const canvas = document.getElementById('sketchCanvas');
      if (!header || !canvas) return;

      const draw = () => {
        const rect = header.getBoundingClientRect();
        const dpr = Math.min(window.devicePixelRatio || 1, 2);
        canvas.width = Math.floor(rect.width * dpr);
        canvas.height = Math.floor(rect.height * dpr);
        canvas.style.width = rect.width + 'px';
        canvas.style.height = rect.height + 'px';
        const ctx = canvas.getContext('2d');
        ctx.scale(dpr, dpr);
        ctx.clearRect(0, 0, rect.width, rect.height);

        const rc = rough.canvas(canvas);
        // Soft scribbles background
        rc.circle(rect.width * 0.85, rect.height * 0.2, 220, {
          fill: 'rgba(245,162,25,0.12)', fillStyle: 'solid', stroke: 'rgba(245,162,25,0.36)', roughness: 2.6
        });
        rc.circle(rect.width * 0.15, rect.height * 0.65, 260, {
          fill: 'rgba(0,184,169,0.10)', fillStyle: 'solid', stroke: 'rgba(0,184,169,0.32)', roughness: 2.2
        });
        rc.curve([[rect.width*0.1, rect.height*0.85],[rect.width*0.35, rect.height*0.7],[rect.width*0.65, rect.height*0.9],[rect.width*0.92, rect.height*0.75]], {
          stroke: 'rgba(25,55,82,0.22)', strokeWidth: 1.5, roughness: 1.5
        });
      };

      draw();
      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(draw, 120);
      });
    }

    function initTiltCards() {
      if (!window.gsap) return;
      const tiltElements = document.querySelectorAll('.card, .kv');
      tiltElements.forEach((el) => {
        const bounds = () => el.getBoundingClientRect();
        el.addEventListener('mousemove', (e) => {
          const b = bounds();
          const relX = (e.clientX - b.left) / b.width - 0.5;
          const relY = (e.clientY - b.top) / b.height - 0.5;
          gsap.to(el, { rotateY: relX * 10, rotateX: -relY * 10, transformPerspective: 800, transformOrigin: 'center', duration: 0.2 });
        });
        el.addEventListener('mouseleave', () => {
          gsap.to(el, { rotateY: 0, rotateX: 0, duration: 0.3, ease: 'power2.out' });
        });
      });
    }

    function initStickyCTA() {
      const sticky = document.querySelector('.mobile-sticky-cta');
      if (!sticky) return;
      const update = () => {
        if (window.innerWidth <= 768) {
          sticky.style.display = 'block';
        } else {
          sticky.style.display = 'none';
        }
      };
      update();
      window.addEventListener('resize', update);
    }

    // Multi-step modal state
    let currentStep = 1;
    function updateStepsUI() {
      const total = 3;
      document.querySelectorAll('.step').forEach((s) => s.classList.remove('active'));
      const active = document.querySelector(`.step.step-${currentStep}`);
      if (active) active.classList.add('active');
      // dots
      document.querySelectorAll('[data-step-dot]').forEach((d) => {
        const idx = Number(d.getAttribute('data-step-dot'));
        d.classList.toggle('active', idx <= currentStep);
      });
      // buttons
      const btnBack = document.getElementById('btnBack');
      const btnNext = document.getElementById('btnNext');
      const btnSubmit = document.getElementById('btnSubmit');
      if (btnBack) btnBack.style.display = currentStep > 1 ? 'inline-block' : 'none';
      if (btnNext) btnNext.style.display = currentStep < total ? 'inline-block' : 'none';
      if (btnSubmit) btnSubmit.style.display = currentStep === total ? 'inline-block' : 'none';
    }

    function validateStep(step) {
      // basic HTML5 validity within active step
      const stepEl = document.querySelector(`.step.step-${step}`);
      if (!stepEl) return true;
      const inputs = stepEl.querySelectorAll('input, textarea, select');
      for (const input of inputs) {
        if (!input.checkValidity()) {
          input.reportValidity();
          return false;
        }
      }
      return true;
    }

    function initModalSteps() {
      const btnBack = document.getElementById('btnBack');
      const btnNext = document.getElementById('btnNext');
      if (btnBack) btnBack.addEventListener('click', () => { currentStep = Math.max(1, currentStep - 1); updateStepsUI(); });
      if (btnNext) btnNext.addEventListener('click', () => {
        if (!validateStep(currentStep)) return;
        currentStep = Math.min(3, currentStep + 1); updateStepsUI();
      });
      updateStepsUI();
    }

    window.addEventListener('load', () => { setCurrentDate(); applyParams(); initGSAPAnimations(); initRoughSketch(); initTiltCards(); initStickyCTA(); initModalSteps(); });
  </script>

  <!-- Rough Notation highlights -->
  <script type="module">
    import { annotate, annotationGroup } from 'https://unpkg.com/rough-notation?module';
    window.addEventListener('load', () => {
      const title = document.querySelector('.title');
      const eyebrow = document.querySelector('.eyebrow');
      const sectionHeaders = document.querySelectorAll('h2');

      const annotations = [];
      if (eyebrow) annotations.push(annotate(eyebrow, { type: 'highlight', color: 'rgba(0,184,169,0.18)', multiline: true, padding: 3 }));
      if (title) annotations.push(annotate(title, { type: 'underline', color: '#F5A219', strokeWidth: 2, animationDuration: 1200 }));
      sectionHeaders.forEach(h => annotations.push(annotate(h, { type: 'box', color: 'rgba(245,162,25,0.35)', padding: 6, strokeWidth: 1.5 })));

      const group = annotationGroup(annotations);
      setTimeout(() => group.show(), 450);
    });
  </script>

  <!-- Mobile Sticky CTA -->
  <div class="mobile-sticky-cta" role="button" aria-label="אישור ההצעה" onclick="openApprovalModal()">
    <button class="cta-btn">אישור ההצעה</button>
  </div>
</body>
</html>